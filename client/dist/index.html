<!DOCTYPE html>
<html>

<!-- AFrame (uses three.js) -->
<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.loaders.min.js"></script>
<script
  src="https://unpkg.com/aframe-text-geometry-component@0.5.1/dist/aframe-text-geometry-component.min.js"></script>
<!-- AR.js: we import arjs version without NFT but with marker + location based support -->
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,300;0,400;0,600;0,700;0,900;1,300;1,400;1,600;1,700&display=swap" rel="stylesheet">

<script src="bundle.js"></script>
<link rel="stylesheet" href="styles.css">

<body>
  <a-scene embedded arjs='detectionMode: mono_and_matrix; matrixCodeType: 4x4_BCH_13_9_3' shadow="type:pcfSoft"
    vr-mode-ui="enabled: false">
    <!-- 'stats' component removed -->
    <!-- FIXME: Samsung Internet telephoto lens issues -->

    <a-assets>
      <a-asset-item id="egg" src="/assets/models/egg.gltf"></a-asset-item>
    </a-assets>


    <a-marker type="barcode" value="100" id="barcode-100" registerevents>

        <a-box shadow="receive:true" material="color: #55ff66" geometry="height: 0.1" opacity="0.8" position="0 0.05 0" scale="5 5 5">
        </a-box>
        <a-entity id="egg_entity" gltf-model="#egg" shadow="receive:false" scale="5 5 5"
          animation__position="property: position; from: 0 0 0; to: 0 5 0; dur: 2000; easing: easeOutElastic; startEvents: parentMarkerFound"
          animation__opacity="property: gltf-material-tweak.opacity; from: 0; to: 1; dur: 320; easing: easeOutQuad; startEvents: parentMarkerFound"
          position="0 0 0" gltf-material-tweak="material: EggMaterial001; opacity: 1.0">
        </a-entity>
        <a-entity id="confetti-particles" scale="5 5 5" confetti-particles></a-entity>
        <a-entity id="light-ring" scale="5 5 5" light-ring></a-entity>
    </a-marker>



    <a-marker type="barcode" value="101" id="barcode-101" registerevents>

      <a-box material="color: #55ff66" geometry="height: 0.1" opacity="0.8" position="0 0.05 0"></a-box>
      <a-entity gltf-model="#egg"
        animation__position="property: position; from: 0 0 0; to: 0 1 0; dur: 2000; easing: easeOutElastic; startEvents: parentMarkerFound"
        animation__opacity="property: gltf-material-tweak.color; from: #ff0000; to: #00aa00; dur: 3000; easing: easeOutQuad; startEvents: parentMarkerFound"
        position="0 0 0" gltf-material-tweak="material: EggMaterial001; opacity: 1.0">
      </a-entity>
      <a-text value="101" font="exo2bold" align="center" color="white" position="0 0.2 0" side="double"></a-text>

    </a-marker>

    <a-light type="ambient" intensity="0.4"></a-light>
    <a-light type="directional" intensity="0.6" position="-1 1 0"></a-light>

    <a-entity camera="near: 1.0" />
  </a-scene>


  <div class="welcome-dialog" id="welcome-dialog">
    <h1>Welcome to AR Egg Hunt! &#x1FABA;&#x1F95A;&#x1F430;</h1>
    <p>Enter your name to start.</p>
    <p>Your name can't be changed and it'll be shared next to your score on the leaderboard.</p>
    <p>If you're using Android, for best results use a recent version of Google Chrome.</p>
    <form id="start-form" onsubmit="return false;">
      <input type="text" id="start-form-name" autocomplete="name" minlength="3" maxlength="20" required></input>
      <input type="submit" value="Play">
    </form>
    </form>
  </div>

  <div id="game-hud" class="game-hud hide">
    <div class="points">
      <div class="points-title">Points</div>
      <div class="points-text" id="points-text">0</div>
    </div>
    <div class="user">
      <div class="user-title">Playing as</div>
      <div class="user-text" id="user-text"></div>
    </div>
  </div>
</body>

</html>